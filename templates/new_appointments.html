{% extends 'receptionist_base.html' %}

{% block title %}New Appointments - HMS{% endblock %}

{% block content %}
<div class="container mt-5">
  <h3 class="mb-4 text-center">üóìÔ∏è New (Pending) Appointments</h3>

  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle text-center">
      <thead class="table-dark">
        <tr>
          <th>Doctor</th>
          <th>Patient</th>
          <th>Disease</th>
          <th>Description</th>
          <th>Appointment Date</th>
          <th>Appointment Time</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for appointment in appointments %}
        <tr>
          <td>{{ appointment.doctor }}</td>
          <td>{{ appointment.patient }}</td>
          <td>{{ appointment.disease }}</td>
          <td>{{ appointment.symptoms }}</td>
          <td>{{ appointment.appointment_date|date:"M d, Y" }}</td>
          <td>{{ appointment.appointment_time|default:"Not Set" }}</td>
          <td>
            <span class="badge 
              {% if appointment.status == 'Pending' %}bg-warning text-dark{% endif %}
              {% if appointment.status == 'Confirmed' %}bg-success{% endif %}
              {% if appointment.status == 'Completed' %}bg-primary{% endif %}
              {% if appointment.status == 'Cancelled' %}bg-danger{% endif %}">
              {{ appointment.status }}
            </span>
          </td>
          <td>
            <a href="{% url 'assign_status' appointment.id %}" class="btn btn-primary btn-sm">Assign Status</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-muted">No new appointments found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
